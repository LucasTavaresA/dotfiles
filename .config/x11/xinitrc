#!/bin/sh

# mouse
xsetroot -cursor_name left_ptr

# teclado
# troca capslock por escape
setxkbmap -option caps:escape # grep -E "(ctrl|caps):" /usr/share/X11/xkb/rules/base.lst
xset r rate 300 100 # acelera repetição de teclas

# clipmenu
systemctl --user import-environment DISPLAY
export CM_DIR="$HOME/code/shell/dmenuscripts/listas/clipmenu"
clipmenud &

# protetor de tela
xautolock -detectsleep -time 30 -locker "slock" -notify 30 -notifier "notify-send Slock -u critical -t 1800000 'BLOQUEANDO A TELA 30 SEGUNDOS'" &

mpd &
dunst &
nitrogen --restore &
nm-applet &
xbanish &
fluxgui &
#picom &

# polybar
if [ "$OS" = "linuxmint" ]; then
    polybar notebook &
    # espera a barra carregar e esconde a barra
    sleep 5 && polybar-msg cmd hide
elif [ "$OS" = "archlinux" ]; then
    polybar pc &
    # espera a barra carregar e esconde a barra
    sleep 2 && polybar-msg cmd hide
fi

if [ "$WM" = "herbstluftwm" ]; then
    sxhkd -c "$HOME/.config/sxhkd/sxhkd_herbstluftwm" &
    flags=" --locked"
elif [ "$WM" = "dwm" ]; then
    sxhkd -c "$HOME/.config/sxhkd/sxhkd_dwm" &
    dwmblocks &
elif [ "$WM" = "stumpwm" ]; then
    sxhkd -c "$HOME/.config/sxhkd/sxhkd_stumpwm" &
elif [ "$WM" = "bspwm" ]; then
    sxhkd -c "$HOME/.config/sxhkd/sxhkd_bspwm" &
else
    sxhkd -c "$HOME/.config/sxhkd/sxhkd_nowm" &
fi

if [ -n "$flags" ]; then
    exec $WM$flags
else
    exec "$WM"
fi
