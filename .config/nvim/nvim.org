#+TITLE: Configuração do neovim
#+PROPERTY: header-args:vimrc
#+STARTUP: content

* Sumario
:PROPERTIES:
:TOC:      :include all :depth 2 :force (depth) :ignore (this) :local (depth)
:END:

:CONTENTS:
- [[#miscellanea][Miscellanea]]
- [[#plugins][Plugins]]
- [[#teclas][Teclas]]
:END:

* Miscellanea

#+begin_src vimrc :tangle ~/.config/nvim/init.vim
filetype plugin on
filetype indent on
set nocompatible
set hidden
set lazyredraw

"" Arquivos
" Desabilita swapfile
set noswapfile

"" Tabs/Espaços
" Limita tabs em 4 espaços
set tabstop=4
set shiftwidth=4
" Troca tabs por espaços
set expandtab

"" Miscellanea
" Muda o titulo da janela
set title
set titlestring=nvim
set titleold=st
" Da a volta entre linhas
set whichwrap+=<,>,h,l,[,]
" Ativa uso do mouse
set mouse=a
" Copiar e colar para o neovim
autocmd InsertEnter * set cul
autocmd InsertLeave * set nocul
set clipboard+=unnamedplus
" Idioma para correção ortográfica
set spell spelllang=pt
" Atualiza o neovim mais rápido
set updatetime=100
" Procura ignorando maiúsculas
set ignorecase
set smartcase
" Habilita a compleção de comandos
set wildmode=longest,list,full
" Divide a tela do lado e para baixo
set splitbelow splitright
" Não vai automaticamente para os itens pesquisados
set incsearch!
" Linhas não dão a volta na tela
set nowrap
" Desativa comentar automaticamente a próxima linha
autocmd FileType * setlocal formatoptions-=c formatoptions-=r formatoptions-=o
" Automaticamente deleta todos os espaços em branco e novas linhas no salvamento do arquivo
autocmd BufWritePre * let currPos = getpos(".")
autocmd BufWritePre * %s/\s\+$//e
autocmd BufWritePre * %s/\n\+\%$//e
autocmd BufWritePre *.[ch] %s/\%$/\r/e
autocmd BufWritePre * cal cursor(currPos[1], currPos[2])

"" Aparência
" Indica linha selecionada no modo normal
set cursorline
" Define quando a barra superior aparece
set showtabline=0
" Diminui tamanho da barra inferior
set cmdheight=1
" Indicação de sintaxe
syntax on
" Fundo escuro
set background=dark
" Transparência
hi Normal guibg=NONE ctermbg=NONE
hi EndOfBuffer guibg=NONE ctermbg=NONE
hi Normal guibg=NONE ctermbg=NONE
hi CursorLine guibg=#000000
" Cor de palavras pesquisadas
highlight Search guibg=#000000 guifg=#ffff00
" Incida parenteses correspondente
hi! MatchParen cterm=NONE,bold gui=NONE,bold  guibg=NONE guifg=#ff0000
#+end_src

* Plugins

#+begin_src vimrc :tangle ~/.config/nvim/init.vim

call plug#begin('~/.config/nvim/plugins')

"" Aparencia
" Tema
Plug '~/.config/nvim/plugins/moonlight.nvim'
" Indentação e indicação de sintaxe
Plug 'sheerun/vim-polyglot'
" Indica diffs
Plug 'mhinz/vim-signify'
" Esconde a barra
Plug '~/.config/nvim/plugins/lite-dfm'

"" Miscellanea
" Salva posição do cursor
Plug 'farmergreg/vim-lastplace'
" Múltiplos cursores
Plug 'mg979/vim-visual-multi', {'branch': 'master'}
" Comenta linhas
Plug 'tpope/vim-commentary'
" Troca/coloca aspas/parenteses
Plug 'tpope/vim-surround'
" Expande região selecionada
Plug 'terryma/vim-expand-region'
" Previsão de cores
Plug 'rrethy/vim-hexokinase', { 'do': 'make hexokinase' }

call plug#end()

" Inicia sem a barra - LiteDFM
autocmd VimEnter * LiteDFMToggle

" Estilo de previsão de cores - Hexokinase
let g:Hexokinase_highlighters = [ 'backgroundfull' ]

" Tema - moonlight
colorscheme moonlight
#+end_src

* Teclas

#+begin_src vimrc :tangle ~/.config/nvim/init.vim

let mapleader =" "
let maplocalleader = " "
" Para indicação de palavras procuradas
nnoremap <esc><esc> :noh<return>
" Comentar linhas
map cc :norm gcc<CR>j
" Copiar na linha abaixo
map P :norm o<CR>p
" Ativa/Desativa o corretor ortográfico
map <leader>s :setlocal spell! spelllang=pt<CR>
" Navega entre as divisórias
map <leader><Tab> :wincmd w<CR>
" Esconde a modeline
map <leader>x :LiteDFMToggle<CR>
" Expande região selecionada
map <A-Up> <Plug>(expand_region_expand)
map <A-Down> <Plug>(expand_region_shrink)
" Troca para o próximo buffer
map <A-Tab> :bn<CR>
" Salvar buffer
map <leader>ww :w<CR>
" Sair e salvar
map <leader>wq :wq!<CR>
" Fecha sem salvar
map <leader>qq :q!<CR>
" Divide a tela do lado
map <C-A-Right> :vs<CR>
" Divide a tela abaixo
map <C-A-down> :sp<CR>
" Ativa previsão de cores
map <leader>r :ColorizerToggle<CR>
" Selecionar múltiplas palavras
map <A-s> <C-n>
" criar cursor em uma linha
map <C-s-Up> <C-Up>
map <C-s-Down> <C-Down>
" Copiar buffer
map cb ggVGy
#+end_src
