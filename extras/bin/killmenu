#!/bin/bash

MENU_DIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)

function join
{
    local IFS="$1"
    shift
    echo "$*"
}

function menu
{
    # Grab the prompt message.
    local prompt="$1"
    shift

    # Combine the rest of our arguments.
    local items=$(join $'\n' "$@")

    dmenu -l 35 -z 1358 -p "${prompt}" <<< "${items}" | tail -1
}

function confirm
{
    menu "$*" 'No' 'Yes'
}

function alert
{
    menu "$*" 'OK'
}

processList=$(ps -ef | sed 1d)
selection=$(menu "Kill: " "$processList")
[[ -z "$selection" ]] && exit

pid=$(awk '{print $2}' <<< "$selection" | tr '\n' ' ')
[[ -z "$pid" ]] && exit

notify-send "Killing Process:" "$selection"
kill "$pid"
